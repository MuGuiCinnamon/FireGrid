# FireGrid

可以添加内容：尖刺，汽油，风扇

------整体想法-----

我想要制作一个unity 小游戏，现在的想法并不完整，但我会指出未来可能有更改的地方，希望现在的代码保留未来添加新效果的可能性。

首先游戏整体由48*48的网格组成，地面会由一块块的game object组成，这些gameobject我称为地板，每块地板都携带着不同的属性，是否可以燃烧，玩家是否可以在上面移动等等（后续可能会添加其他属性），玩家只可以使用WASD来上下左右移动一个按钮，每次只能移动一个网格的距离，当按下空格会触发一些特定的效果，普通情况就是玩家按下空格键时且当前玩家所在位置处有个可以燃烧的地板时，会诞生火焰。（后续可能会添加其他情况）

火焰有两种触发方式，
1. 玩家按下空格键且当前玩家所在位置处有个可以燃烧的地板时，会诞生火焰。
2. 火焰本身也会蔓延，正常火焰玩家每移动三步就会触发蔓延效果（0（不被计算），1，2，3（触发），4，5，6（触发）），蔓延效果时以该火焰为中心，上下左右一个网格诞生一个火焰（根据不同情况，火焰的蔓延时间和位置都会发生改变，）

每个火焰的燃烧都由玩家的步数控制，从点燃对应火焰诞生时开始计数，此时为0，仅触发fire_ready动画没有火焰实际效果。当玩家再向任意方向移动一次，此时步数+1，触发fire_on动画然后转为fire_keep动画循环,并开启该火焰的燃烧属性，然后每次玩家进行移动，步数+1，当步数记录为6的时候，触发fire_off动画，并删除火焰对象，将火焰所处位置的地板的属性改为不可燃烧。

----------map分支负责：地图-------------
我想先制作地板部分

地板目前有三种素材，草，荒地，石地，格式为96和142，草+荒地合成为草地将会用于可燃烧地板，荒地和石地将会用于不可燃烧地板，我会在scene中自己手动放置地板块，图片的顶部将会对齐网格，图片下半部分我计划是让下一排的地板块挡住，形成浮空感。只需要用坐标进行互动判断。另外当草地上有着火焰正在燃烧的时候，随着步数的增加，草的图层会越变越透明，最后和火焰一起消失。以及之前提及的效果，每块地板都携带着不同的属性，是否可以燃烧，玩家是否可以在上面移动等等（后续可能会添加其他属性），当火焰熄灭后该地板的属性改为不可燃烧。

TileFactory.cs自动生成，直接用二维数组的方式告诉脚本我想怎么摆放，像第一关使用这个数组生成，第二关就是另外一个数组。同时我希望可以在scene场景中生成，而不是在打开gamescene后生成，
创造了一个土地预制体，它有所有的地板图层，GrassLayer  DirtLayer和RockLayer。在实际使用时，我会根据需要开启或者关闭对应图层并调节开关，以达到搭配所有地板的效果。目前的基础搭配：Grass：有GrassLayer  DirtLayer，可以通行，可以燃烧， Dirt和Rock可以通行，不可以燃烧，未来会有多种搭配。因为我想支持关卡切换，多个关卡数组要不另起一个专门到文件来储存，到时候引用就行

- - 使用方法：
- TileDatabase
在 Unity Editor 中：
在 Assets 文件夹中右键 → Create > Map > TileDatabase
生成一个名为 TileDatabase.asset
在 Inspector 中点 "+" 增加三条配置，如下：
Code	ActiveLayers	    Flammable	Walkable
G	    GrassLayer, DirtLayer	✅	    ✅
D	    DirtLayer	            ❌	    ✅
R	    RockLayer	            ❌	    ✅
注意名字要和Prefab子物体名完全一致，比如子物体叫 GrassLayer，这里也必须写 GrassLayer

- TileFactory.cs需要在 Inspector 中右键点击 🔧 生成Tile地图

----------Fire分支负责：火-------------
✅ 如果未来需要重新燃烧这个 Tile？
你还需要在 AttachFire() 中恢复颜色为不透明：

csharp
Tile。cs
public void AttachFire(int playerStep)
{
    if (!isFlammable) return;
    fireStartStep = playerStep;

    foreach (var kvp in removableRenderers)
    {
        var sr = kvp.Value;
        var c = sr.color;
        sr.color = new Color(c.r, c.g, c.b, 1f);
    }
}
我要让敌人和玩家所在的网格位置如果有火焰（仅限于开关On，火焰在fire_Keep动画的时候）都会发生反应，敌人预制体接触到火焰会直接被删除，玩家接触到火焰会弹出游戏失败窗口


----------character分支负责：角色-------------
玩家只可以使用WASD来上下左右移动一个按钮，每次只能移动一个网格的距离，当按下空格会触发一些特定的效果，普通情况就是玩家按下空格键时且当前玩家所在位置处有个可以燃烧的地板时，会诞生火焰。（后续可能会添加其他情况）

现在我打算制作一个敌人，我现在有个3*4的行走图（类似rpgmaker的形式），我想要它上下左右行走时触发对应的动画，我应该怎么设置（行走逻辑晚点再弄）

置一下僵尸的行动逻辑，僵尸也只能和玩家一样在网格上移动。但僵尸无法控制移动，只有当玩家移动一步后僵尸才会移动一步，僵尸的路线现弄个简单的，根据它的初始面对方向，它会尝试一直走直线